{"ast":null,"code":"import axios from'axios';const clientId='7c6b8a3ea0e3406b9d8e5974be8b442b';const clientSecret='49aa02d0a85249279ae8ab73bbef28f5';export const getSpotifyToken=async()=>{const response=await axios.post('https://accounts.spotify.com/api/token',null,{headers:{'Content-Type':'application/x-www-form-urlencoded','Authorization':\"Basic \".concat(btoa(\"\".concat(clientId,\":\").concat(clientSecret)))},params:{grant_type:'client_credentials'}});return response.data.access_token;};export const getSpotifyTopTracks=async()=>{const token=await getSpotifyToken();const response=await axios.get('https://api.spotify.com/v1/playlists/37i9dQZEVXbMDoHDwVN2tF/tracks',{headers:{'Authorization':\"Bearer \".concat(token)},params:{market:'US',limit:25}});return response.data.items.map(item=>{var _item$track$album$ima;return{name:item.track.name,artist:item.track.artists[0].name,image:((_item$track$album$ima=item.track.album.images[1])===null||_item$track$album$ima===void 0?void 0:_item$track$album$ima.url)||''};});};export const getLastFmStreams=async(track,artist)=>{try{const response=await axios.get('http://ws.audioscrobbler.com/2.0/',{params:{method:'track.getInfo',api_key:'28c425ac5fe3a7288e17efe8d7f9f82c',artist:artist,track:track,format:'json'}});if(response.data&&response.data.track){return response.data.track.playcount;}}catch(err){console.error('Failed to fetch Last.fm streams',err);}return'N/A';};","map":{"version":3,"names":["axios","clientId","clientSecret","getSpotifyToken","response","post","headers","concat","btoa","params","grant_type","data","access_token","getSpotifyTopTracks","token","get","market","limit","items","map","item","_item$track$album$ima","name","track","artist","artists","image","album","images","url","getLastFmStreams","method","api_key","format","playcount","err","console","error"],"sources":["/Users/peter/Documents/SUMMER 2024/SEG3125/tunescout copy 2/src/components/API.js"],"sourcesContent":["import axios from 'axios';\n\nconst clientId = '7c6b8a3ea0e3406b9d8e5974be8b442b';\nconst clientSecret = '49aa02d0a85249279ae8ab73bbef28f5';\n\nexport const getSpotifyToken = async () => {\n  const response = await axios.post('https://accounts.spotify.com/api/token', null, {\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'Authorization': `Basic ${btoa(`${clientId}:${clientSecret}`)}`\n    },\n    params: {\n      grant_type: 'client_credentials'\n    }\n  });\n\n  return response.data.access_token;\n};\n\nexport const getSpotifyTopTracks = async () => {\n  const token = await getSpotifyToken();\n  const response = await axios.get('https://api.spotify.com/v1/playlists/37i9dQZEVXbMDoHDwVN2tF/tracks', {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    },\n    params: {\n      market: 'US',\n      limit: 25\n    }\n  });\n\n  return response.data.items.map(item => ({\n    name: item.track.name,\n    artist: item.track.artists[0].name,\n    image: item.track.album.images[1]?.url || '',\n  }));\n};\n\nexport const getLastFmStreams = async (track, artist) => {\n  try {\n    const response = await axios.get('http://ws.audioscrobbler.com/2.0/', {\n      params: {\n        method: 'track.getInfo',\n        api_key: '28c425ac5fe3a7288e17efe8d7f9f82c',\n        artist: artist,\n        track: track,\n        format: 'json'\n      }\n    });\n    if (response.data && response.data.track) {\n      return response.data.track.playcount;\n    }\n  } catch (err) {\n    console.error('Failed to fetch Last.fm streams', err);\n  }\n  return 'N/A';\n};\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,QAAQ,CAAG,kCAAkC,CACnD,KAAM,CAAAC,YAAY,CAAG,kCAAkC,CAEvD,MAAO,MAAM,CAAAC,eAAe,CAAG,KAAAA,CAAA,GAAY,CACzC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAJ,KAAK,CAACK,IAAI,CAAC,wCAAwC,CAAE,IAAI,CAAE,CAChFC,OAAO,CAAE,CACP,cAAc,CAAE,mCAAmC,CACnD,eAAe,UAAAC,MAAA,CAAWC,IAAI,IAAAD,MAAA,CAAIN,QAAQ,MAAAM,MAAA,CAAIL,YAAY,CAAE,CAAC,CAC/D,CAAC,CACDO,MAAM,CAAE,CACNC,UAAU,CAAE,oBACd,CACF,CAAC,CAAC,CAEF,MAAO,CAAAN,QAAQ,CAACO,IAAI,CAACC,YAAY,CACnC,CAAC,CAED,MAAO,MAAM,CAAAC,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CAC7C,KAAM,CAAAC,KAAK,CAAG,KAAM,CAAAX,eAAe,CAAC,CAAC,CACrC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAJ,KAAK,CAACe,GAAG,CAAC,oEAAoE,CAAE,CACrGT,OAAO,CAAE,CACP,eAAe,WAAAC,MAAA,CAAYO,KAAK,CAClC,CAAC,CACDL,MAAM,CAAE,CACNO,MAAM,CAAE,IAAI,CACZC,KAAK,CAAE,EACT,CACF,CAAC,CAAC,CAEF,MAAO,CAAAb,QAAQ,CAACO,IAAI,CAACO,KAAK,CAACC,GAAG,CAACC,IAAI,OAAAC,qBAAA,OAAK,CACtCC,IAAI,CAAEF,IAAI,CAACG,KAAK,CAACD,IAAI,CACrBE,MAAM,CAAEJ,IAAI,CAACG,KAAK,CAACE,OAAO,CAAC,CAAC,CAAC,CAACH,IAAI,CAClCI,KAAK,CAAE,EAAAL,qBAAA,CAAAD,IAAI,CAACG,KAAK,CAACI,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,UAAAP,qBAAA,iBAA1BA,qBAAA,CAA4BQ,GAAG,GAAI,EAC5C,CAAC,EAAC,CAAC,CACL,CAAC,CAED,MAAO,MAAM,CAAAC,gBAAgB,CAAG,KAAAA,CAAOP,KAAK,CAAEC,MAAM,GAAK,CACvD,GAAI,CACF,KAAM,CAAApB,QAAQ,CAAG,KAAM,CAAAJ,KAAK,CAACe,GAAG,CAAC,mCAAmC,CAAE,CACpEN,MAAM,CAAE,CACNsB,MAAM,CAAE,eAAe,CACvBC,OAAO,CAAE,kCAAkC,CAC3CR,MAAM,CAAEA,MAAM,CACdD,KAAK,CAAEA,KAAK,CACZU,MAAM,CAAE,MACV,CACF,CAAC,CAAC,CACF,GAAI7B,QAAQ,CAACO,IAAI,EAAIP,QAAQ,CAACO,IAAI,CAACY,KAAK,CAAE,CACxC,MAAO,CAAAnB,QAAQ,CAACO,IAAI,CAACY,KAAK,CAACW,SAAS,CACtC,CACF,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,iCAAiC,CAAEF,GAAG,CAAC,CACvD,CACA,MAAO,KAAK,CACd,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}