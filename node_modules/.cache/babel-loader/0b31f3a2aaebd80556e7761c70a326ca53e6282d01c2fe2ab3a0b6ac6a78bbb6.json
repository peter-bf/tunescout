{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{getSpotifyToken}from'./API';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Discover=()=>{var _searchResults$tracks,_searchResults$tracks2,_searchResults$albums,_searchResults$albums2;const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleSearch=async e=>{e.preventDefault();if(!searchQuery.trim()){setError('ERROR: Please make sure to input some text into the searchox!');return;}setLoading(true);setError(null);try{const token=await getSpotifyToken();const response=await axios.get('https://api.spotify.com/v1/search',{headers:{'Authorization':\"Bearer \".concat(token)},params:{q:searchQuery,type:'track,album',limit:10}});setSearchResults(response.data);}catch(err){setError('Failed to fetch search results');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center min-h-[calc(100vh-200px)] p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-4\",children:\"Discover Music\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"w-full max-w-lg flex items-center bg-white rounded-lg shadow-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6 text-gray-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"})})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"flex-grow p-2 rounded-l-lg focus:outline-none\",placeholder:\"Search for songs or albums...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-red-600 text-white px-4 py-2 rounded-r-lg\",children:\"Search\"})]}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4\",children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-red-500\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-4xl mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:[(_searchResults$tracks=searchResults.tracks)===null||_searchResults$tracks===void 0?void 0:(_searchResults$tracks2=_searchResults$tracks.items)===null||_searchResults$tracks2===void 0?void 0:_searchResults$tracks2.map(track=>/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(\"iframe\",{src:\"https://open.spotify.com/embed/track/\".concat(track.id),width:\"100%\",height:\"80\",frameBorder:\"0\",allowTransparency:\"true\",allow:\"encrypted-media\",title:track.name,className:\"rounded-lg\"})},track.id)),(_searchResults$albums=searchResults.albums)===null||_searchResults$albums===void 0?void 0:(_searchResults$albums2=_searchResults$albums.items)===null||_searchResults$albums2===void 0?void 0:_searchResults$albums2.map(album=>/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:/*#__PURE__*/_jsx(\"iframe\",{src:\"https://open.spotify.com/embed/album/\".concat(album.id),width:\"100%\",height:\"380\",frameBorder:\"0\",allowTransparency:\"true\",allow:\"encrypted-media\",title:album.name,className:\"rounded-lg\"})},album.id))]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-center text-gray-500\",children:\"(Note: When you click \\\"Add to Spotify,\\\" if you are logged into Spotify on the browser, it will actually add it to your Spotify account!)\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-center text-gray-500\",children:\"Press the play button to play music!\"})]});};export default Discover;","map":{"version":3,"names":["React","useState","axios","getSpotifyToken","jsx","_jsx","jsxs","_jsxs","Discover","_searchResults$tracks","_searchResults$tracks2","_searchResults$albums","_searchResults$albums2","searchQuery","setSearchQuery","searchResults","setSearchResults","loading","setLoading","error","setError","handleSearch","e","preventDefault","trim","token","response","get","headers","concat","params","q","type","limit","data","err","className","children","onSubmit","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","placeholder","value","onChange","target","tracks","items","map","track","src","id","width","height","frameBorder","allowTransparency","allow","title","name","albums","album"],"sources":["/Users/peter/Documents/SUMMER 2024/SEG3125/tunescout/src/components/Discover.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { getSpotifyToken } from './API';\n\nconst Discover = () => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    if (!searchQuery.trim()) {\n      setError('ERROR: Please make sure to input some text into the searchox!');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n\n    try {\n      const token = await getSpotifyToken();\n      const response = await axios.get('https://api.spotify.com/v1/search', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        },\n        params: {\n          q: searchQuery,\n          type: 'track,album',\n          limit: 10\n        }\n      });\n\n      setSearchResults(response.data);\n    } catch (err) {\n      setError('Failed to fetch search results');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-[calc(100vh-200px)] p-4\">\n      <h1 className=\"text-4xl font-bold mb-4\">Discover Music</h1>\n      <form onSubmit={handleSearch} className=\"w-full max-w-lg flex items-center bg-white rounded-lg shadow-md\">\n        <div className=\"px-3\">\n          <svg className=\"h-6 w-6 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n        </div>\n        <input\n          type=\"text\"\n          className=\"flex-grow p-2 rounded-l-lg focus:outline-none\"\n          placeholder=\"Search for songs or albums...\"\n          value={searchQuery}\n          onChange={(e) => setSearchQuery(e.target.value)}\n        />\n        <button type=\"submit\" className=\"bg-red-600 text-white px-4 py-2 rounded-r-lg\">Search</button>\n      </form>\n      {loading && <p className=\"mt-4\">Loading...</p>}\n      {error && <p className=\"mt-4 text-red-500\">{error}</p>}\n      <div className=\"w-full max-w-4xl mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {searchResults.tracks?.items?.map((track) => (\n          <div key={track.id} className=\"w-full\">\n            <iframe\n              src={`https://open.spotify.com/embed/track/${track.id}`}\n              width=\"100%\"\n              height=\"80\"\n              frameBorder=\"0\"\n              allowTransparency=\"true\"\n              allow=\"encrypted-media\"\n              title={track.name}\n              className=\"rounded-lg\"\n            ></iframe>\n          </div>\n        ))}\n        {searchResults.albums?.items?.map((album) => (\n          <div key={album.id} className=\"w-full\">\n            <iframe\n              src={`https://open.spotify.com/embed/album/${album.id}`}\n              width=\"100%\"\n              height=\"380\"\n              frameBorder=\"0\"\n              allowTransparency=\"true\"\n              allow=\"encrypted-media\"\n              title={album.name}\n              className=\"rounded-lg\"\n            ></iframe>\n          </div>\n        ))}\n      </div>\n      <p className=\"mt-1 text-center text-gray-500\">\n        (Note: When you click \"Add to Spotify,\" if you are logged into Spotify on the browser, it will actually add it to your Spotify account!)\n      </p>\n      <p className=\"mt-1 text-center text-gray-500\">\n      Press the play button to play music!\n      </p>\n\n    </div>\n  );\n};\n\nexport default Discover;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}