{"ast":null,"code":"import React,{useState,useEffect,useCallback,useRef}from'react';import{useQuery}from'react-query';import{getLastFmTopArtists}from'./API';import ArtistCard from'./ArtistCard';import ArtistModal from'./ArtistModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Artists=()=>{const[selectedArtist,setSelectedArtist]=useState(null);const[isModalVisible,setIsModalVisible]=useState(false);const modalRef=useRef(null);const{data:artists,error,isLoading}=useQuery('topArtists',getLastFmTopArtists);const handleArtistClick=useCallback(artist=>{setSelectedArtist(artist);setIsModalVisible(true);},[]);const closePopup=useCallback(()=>{setIsModalVisible(false);setTimeout(()=>{setSelectedArtist(null);},300);},[]);useEffect(()=>{const handleClickOutside=event=>{if(modalRef.current&&!modalRef.current.contains(event.target)){closePopup();}};if(isModalVisible){document.addEventListener('mousedown',handleClickOutside);}else{document.removeEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[isModalVisible,closePopup]);if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center mt-4\",children:\"Failed to fetch top artists\"});if(isLoading)return/*#__PURE__*/_jsx(\"p\",{className:\"text-center mt-4\",children:\"Loading...\"});const sortedArtists=[...artists].sort((a,b)=>b.popularity-a.popularity);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 mb-3\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl font-bold text-center mb-5 text-red-600 py-3\",children:\"Top Artists\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-5 gap-6\",children:sortedArtists.slice(0,50).map((artist,index)=>/*#__PURE__*/_jsx(ArtistCard,{artist:artist,index:index,onClick:handleArtistClick},artist.id))})}),selectedArtist&&/*#__PURE__*/_jsx(ArtistModal,{artist:selectedArtist,isVisible:isModalVisible,onClose:closePopup,modalRef:modalRef})]});};export default Artists;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useQuery","getLastFmTopArtists","ArtistCard","ArtistModal","jsx","_jsx","jsxs","_jsxs","Artists","selectedArtist","setSelectedArtist","isModalVisible","setIsModalVisible","modalRef","data","artists","error","isLoading","handleArtistClick","artist","closePopup","setTimeout","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","className","children","sortedArtists","sort","a","b","popularity","slice","map","index","onClick","id","isVisible","onClose"],"sources":["/Users/peter/Documents/SUMMER 2024/SEG3125/tunescout/src/components/Artists.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useQuery } from 'react-query';\nimport { getLastFmTopArtists } from './API';\nimport ArtistCard from './ArtistCard';\nimport ArtistModal from './ArtistModal';\n\nconst Artists = () => {\n  const [selectedArtist, setSelectedArtist] = useState(null);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const modalRef = useRef(null);\n\n  const { data: artists, error, isLoading } = useQuery('topArtists', getLastFmTopArtists);\n\n  const handleArtistClick = useCallback((artist) => {\n    setSelectedArtist(artist);\n    setIsModalVisible(true);\n  }, []);\n\n  const closePopup = useCallback(() => {\n    setIsModalVisible(false);\n    setTimeout(() => {\n      setSelectedArtist(null);\n    }, 300);\n  }, []);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (modalRef.current && !modalRef.current.contains(event.target)) {\n        closePopup();\n      }\n    };\n\n    if (isModalVisible) {\n      document.addEventListener('mousedown', handleClickOutside);\n    } else {\n      document.removeEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isModalVisible, closePopup]);\n\n  if (error) return <p className=\"text-red-500 text-center mt-4\">Failed to fetch top artists</p>;\n  if (isLoading) return <p className=\"text-center mt-4\">Loading...</p>;\n\n  const sortedArtists = [...artists].sort((a, b) => b.popularity - a.popularity);\n\n  return (\n    <div className=\"p-4 mb-3\">\n      <h1 className=\"text-5xl font-bold text-center mb-5 text-red-600 py-3\">Top Artists</h1>\n      <div className=\"flex justify-center\">\n        <div className=\"grid grid-cols-5 gap-6\">\n          {sortedArtists.slice(0, 50).map((artist, index) => (\n            <ArtistCard key={artist.id} artist={artist} index={index} onClick={handleArtistClick} />\n          ))}\n        </div>\n      </div>\n      {selectedArtist && <ArtistModal artist={selectedArtist} isVisible={isModalVisible} onClose={closePopup} modalRef={modalRef} />}\n    </div>\n  );\n};\n\nexport default Artists;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}