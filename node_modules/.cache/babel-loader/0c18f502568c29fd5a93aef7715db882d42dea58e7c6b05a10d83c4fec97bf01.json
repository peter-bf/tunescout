{"ast":null,"code":"import React,{useState,useRef,useEffect,useCallback}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Hero(_ref){let{onLinkClick,isPopupOpen}=_ref;const[isMouseDown,setIsMouseDown]=useState(false);const[rotation,setRotation]=useState(0);const[lastMousePosition,setLastMousePosition]=useState({x:0,y:0});const[lastScratchTime,setLastScratchTime]=useState(0);const discRef=useRef(null);const animationRef=useRef(null);const scratchSoundRef=useRef(null);const SCRATCH_COOLDOWN=1500;const SCRATCH_THRESHOLD=70;useEffect(()=>{scratchSoundRef.current=new Audio(\"\".concat(process.env.PUBLIC_URL,\"/sounds/scratch.mp3\"));scratchSoundRef.current.load();let lastTime=0;const autoRotateSpeed=0.05;const animate=time=>{if(lastTime!==0){const deltaTime=time-lastTime;if(!isMouseDown){setRotation(prevRotation=>(prevRotation+autoRotateSpeed*deltaTime)%360);}}lastTime=time;animationRef.current=requestAnimationFrame(animate);};animationRef.current=requestAnimationFrame(animate);return()=>{if(animationRef.current){cancelAnimationFrame(animationRef.current);}};},[isMouseDown]);const playScratching=useCallback(()=>{const currentTime=Date.now();if(currentTime-lastScratchTime>SCRATCH_COOLDOWN){if(scratchSoundRef.current){scratchSoundRef.current.currentTime=0;scratchSoundRef.current.play().catch(e=>console.log(\"Audio play failed:\",e));}setLastScratchTime(currentTime);}},[lastScratchTime]);const handleMouseDown=e=>{setIsMouseDown(true);setLastMousePosition({x:e.clientX,y:e.clientY});};const handleMouseUp=useCallback(()=>{setIsMouseDown(false);},[]);const handleMouseMove=useCallback(e=>{if(isMouseDown&&discRef.current){const rect=discRef.current.getBoundingClientRect();const discCenterX=rect.left+rect.width/2;const discCenterY=rect.top+rect.height/2;const lastAngle=Math.atan2(lastMousePosition.y-discCenterY,lastMousePosition.x-discCenterX);const newAngle=Math.atan2(e.clientY-discCenterY,e.clientX-discCenterX);let deltaRotation=(newAngle-lastAngle)*(180/Math.PI);setRotation(prevRotation=>{let newRotation=(prevRotation+deltaRotation)%360;return newRotation<0?newRotation+360:newRotation;});// Check for quick back-and-forth movement\nif(Math.abs(deltaRotation)>SCRATCH_THRESHOLD){playScratching();}setLastMousePosition({x:e.clientX,y:e.clientY});}},[isMouseDown,lastMousePosition,playScratching]);useEffect(()=>{document.addEventListener('mouseup',handleMouseUp);document.addEventListener('mousemove',handleMouseMove);return()=>{document.removeEventListener('mouseup',handleMouseUp);document.removeEventListener('mousemove',handleMouseMove);};},[handleMouseUp,handleMouseMove]);return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white relative overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8 flex flex-col md:flex-row items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:w-1/2 mb-8 md:mb-0 z-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-4\",children:\"Discover Your Next Favorite Song \\uD83C\\uDFB5\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl mb-6\",children:\"TuneScout scouts the internet for you and helps you find new music.\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#trending\",className:\"discover-music-btn bg-primary text-white px-8 py-3 rounded-full transition duration-300 \".concat(isPopupOpen?'opacity-50 cursor-not-allowed':'hover:bg-red-500'),onClick:e=>{if(isPopupOpen){e.preventDefault();}else{onLinkClick('Trending');}},children:\"Discover Music\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/2 relative h-64\",children:/*#__PURE__*/_jsx(\"div\",{ref:discRef,className:\"absolute -right-1/2 top-1/2 transform -translate-y-1/2\",onMouseDown:handleMouseDown,style:{transform:\"translateY(-50%) rotate(\".concat(rotation,\"deg)\"),cursor:isMouseDown?'grabbing':'grab'},children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.PUBLIC_URL,\"/images/disc.png\"),alt:\"Rotating Vinyl Disc\",className:\"h-full w-auto select-none pointer-events-none\",style:{height:'120%'},draggable:\"false\"})})})]})});}export default Hero;","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","jsx","_jsx","jsxs","_jsxs","Hero","_ref","onLinkClick","isPopupOpen","isMouseDown","setIsMouseDown","rotation","setRotation","lastMousePosition","setLastMousePosition","x","y","lastScratchTime","setLastScratchTime","discRef","animationRef","scratchSoundRef","SCRATCH_COOLDOWN","SCRATCH_THRESHOLD","current","Audio","concat","process","env","PUBLIC_URL","load","lastTime","autoRotateSpeed","animate","time","deltaTime","prevRotation","requestAnimationFrame","cancelAnimationFrame","playScratching","currentTime","Date","now","play","catch","e","console","log","handleMouseDown","clientX","clientY","handleMouseUp","handleMouseMove","rect","getBoundingClientRect","discCenterX","left","width","discCenterY","top","height","lastAngle","Math","atan2","newAngle","deltaRotation","PI","newRotation","abs","document","addEventListener","removeEventListener","className","children","href","onClick","preventDefault","ref","onMouseDown","style","transform","cursor","src","alt","draggable"],"sources":["/Users/peter/Documents/SUMMER 2024/SEG3125/tunescout/src/components/Hero.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\n\nfunction Hero({ onLinkClick, isPopupOpen }) {\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [rotation, setRotation] = useState(0);\n  const [lastMousePosition, setLastMousePosition] = useState({ x: 0, y: 0 });\n  const [lastScratchTime, setLastScratchTime] = useState(0);\n  const discRef = useRef(null);\n  const animationRef = useRef(null);\n  const scratchSoundRef = useRef(null);\n\n  const SCRATCH_COOLDOWN = 1500; \n  const SCRATCH_THRESHOLD = 70; \n\n  useEffect(() => {\n    scratchSoundRef.current = new Audio(`${process.env.PUBLIC_URL}/sounds/scratch.mp3`); \n    scratchSoundRef.current.load(); \n\n    let lastTime = 0;\n    const autoRotateSpeed = 0.05;\n\n    const animate = (time) => {\n      if (lastTime !== 0) {\n        const deltaTime = time - lastTime;\n        if (!isMouseDown) {\n          setRotation((prevRotation) => (prevRotation + autoRotateSpeed * deltaTime) % 360);\n        }\n      }\n      lastTime = time;\n      animationRef.current = requestAnimationFrame(animate);\n    };\n\n    animationRef.current = requestAnimationFrame(animate);\n\n    return () => {\n      if (animationRef.current) {\n        cancelAnimationFrame(animationRef.current);\n      }\n    };\n  }, [isMouseDown]);\n\n  const playScratching = useCallback(() => {\n    const currentTime = Date.now();\n    if (currentTime - lastScratchTime > SCRATCH_COOLDOWN) {\n      if (scratchSoundRef.current) {\n        scratchSoundRef.current.currentTime = 0;\n        scratchSoundRef.current.play().catch(e => console.log(\"Audio play failed:\", e));\n      }\n      setLastScratchTime(currentTime);\n    }\n  }, [lastScratchTime]);\n\n  const handleMouseDown = (e) => {\n    setIsMouseDown(true);\n    setLastMousePosition({ x: e.clientX, y: e.clientY });\n  };\n\n  const handleMouseUp = useCallback(() => {\n    setIsMouseDown(false);\n  }, []);\n\n  const handleMouseMove = useCallback((e) => {\n    if (isMouseDown && discRef.current) {\n      const rect = discRef.current.getBoundingClientRect();\n      const discCenterX = rect.left + rect.width / 2;\n      const discCenterY = rect.top + rect.height / 2;\n\n      const lastAngle = Math.atan2(lastMousePosition.y - discCenterY, lastMousePosition.x - discCenterX);\n      const newAngle = Math.atan2(e.clientY - discCenterY, e.clientX - discCenterX);\n      \n      let deltaRotation = (newAngle - lastAngle) * (180 / Math.PI);\n      \n      setRotation((prevRotation) => {\n        let newRotation = (prevRotation + deltaRotation) % 360;\n        return newRotation < 0 ? newRotation + 360 : newRotation;\n      });\n\n      // Check for quick back-and-forth movement\n      if (Math.abs(deltaRotation) > SCRATCH_THRESHOLD) {\n        playScratching();\n      }\n\n      setLastMousePosition({ x: e.clientX, y: e.clientY });\n    }\n  }, [isMouseDown, lastMousePosition, playScratching]);\n\n  useEffect(() => {\n    document.addEventListener('mouseup', handleMouseUp);\n    document.addEventListener('mousemove', handleMouseMove);\n\n    return () => {\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.removeEventListener('mousemove', handleMouseMove);\n    };\n  }, [handleMouseUp, handleMouseMove]);\n\n  return (\n    <div className=\"bg-white relative overflow-hidden\">\n      <div className=\"container mx-auto px-4 py-8 flex flex-col md:flex-row items-center\">\n        <div className=\"md:w-1/2 mb-8 md:mb-0 z-10\">\n          <h1 className=\"text-4xl font-bold mb-4\">Discover Your Next Favorite Song ðŸŽµ</h1>\n          <p className=\"text-xl mb-6\">TuneScout scouts the internet for you and helps you find new music.</p>\n          <a\n            href=\"#trending\"\n            className={`discover-music-btn bg-primary text-white px-8 py-3 rounded-full transition duration-300 ${isPopupOpen ? 'opacity-50 cursor-not-allowed' : 'hover:bg-red-500'}`}\n            onClick={(e) => {\n              if (isPopupOpen) {\n                e.preventDefault();\n              } else {\n                onLinkClick('Trending');\n              }\n            }}\n          >\n            Discover Music\n          </a>\n        </div>\n        <div className=\"md:w-1/2 relative h-64\">\n          <div \n            ref={discRef}\n            className=\"absolute -right-1/2 top-1/2 transform -translate-y-1/2\"\n            onMouseDown={handleMouseDown}\n            style={{ \n              transform: `translateY(-50%) rotate(${rotation}deg)`,\n              cursor: isMouseDown ? 'grabbing' : 'grab'\n            }}\n          >\n            <img\n              src={`${process.env.PUBLIC_URL}/images/disc.png`}\n              alt=\"Rotating Vinyl Disc\"\n              className=\"h-full w-auto select-none pointer-events-none\"\n              style={{ height: '120%' }}\n              draggable=\"false\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Hero;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}